# Phase 2: Firebase ë°ì´í„° êµ¬ì¡° ìƒì„± - ì§„í–‰ ì¤‘

## ğŸ“Š í˜„ì¬ ìƒíƒœ

### 1. Firebase êµ¬ì¡° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸
- âœ… `setup-firebase-structure.ts` ì‘ì„± ì™„ë£Œ
- âœ… í•„ìš”í•œ ëª¨ë“  ì»¬ë ‰ì…˜ êµ¬ì¡° ì •ì˜
- âœ… ì´ˆê¸° ë°ì´í„° ë° ì¸ë±ìŠ¤ ì„¤ì • í¬í•¨

### 2. ë¡œì»¬ í™˜ê²½ ë¬¸ì œ
- âŒ Firebase ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ì—†ìŒ
- âŒ Application Default Credentials ì„¤ì • ì•ˆë¨
- ê²°ê³¼: ë¡œì»¬ì—ì„œ Firestore ì“°ê¸° ì‘ì—… ë¶ˆê°€

## ğŸ” ë°œê²¬ëœ ë¬¸ì œì 

### 1. ì¸ì¦ ë¬¸ì œ
```
Error: Could not load the default credentials
```
- ë¡œì»¬ í™˜ê²½ì— Firebase ì¸ì¦ ì •ë³´ê°€ ì—†ìŒ
- Vercel í™˜ê²½ì—ì„œë§Œ ì‘ë™ ê°€ëŠ¥

### 2. í•´ê²° ë°©ë²•
1. **ì˜µì…˜ 1**: Firebase ì„œë¹„ìŠ¤ ê³„ì • í‚¤ë¥¼ ë¡œì»¬ì— ì„¤ì •
2. **ì˜µì…˜ 2**: Vercelì— ë°°í¬ í›„ ì‹¤í–‰
3. **ì˜µì…˜ 3**: Firebase Emulator ì‚¬ìš©

## ğŸ“‹ ìƒì„±ë  Firebase êµ¬ì¡°

### ì»¬ë ‰ì…˜ êµ¬ì¡°:
```
firestore-root/
â”œâ”€â”€ stats/
â”‚   â”œâ”€â”€ _index (ë©”íƒ€ë°ì´í„°)
â”‚   â”œâ”€â”€ hourly/
â”‚   â”œâ”€â”€ daily/
â”‚   â”œâ”€â”€ monthly/
â”‚   â””â”€â”€ realtime
â”œâ”€â”€ users/
â”‚   â””â”€â”€ _index
â”œâ”€â”€ readings/
â”‚   â””â”€â”€ _index
â”œâ”€â”€ blogPosts/
â”‚   â””â”€â”€ _index
â”œâ”€â”€ system/
â”‚   â”œâ”€â”€ config
â”‚   â””â”€â”€ status
â””â”€â”€ _metadata/
    â””â”€â”€ collections
```

### í•„ìš”í•œ ë³µí•© ì¸ë±ìŠ¤:
1. **users**: lastActivity (DESC), status (ASC)
2. **readings**: userId (ASC), createdAt (DESC)
3. **blogPosts**: status (ASC), publishedAt (DESC)

## ğŸ› ï¸ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ í•„ìš”í•œ ì‘ì—…:

1. **Firebase ì¸ì¦ ì„¤ì •**
   - Vercelì—ì„œ ì‹¤í–‰í•˜ê±°ë‚˜
   - ë¡œì»¬ì— ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ì„¤ì •

2. **êµ¬ì¡° ìƒì„± ì‹¤í–‰**
   ```bash
   node scripts/run-firebase-setup.js
   ```

3. **Firebase Consoleì—ì„œ ì¸ë±ìŠ¤ ìƒì„±**
   - ë³µí•© ì¸ë±ìŠ¤ëŠ” ìˆ˜ë™ìœ¼ë¡œ ìƒì„± í•„ìš”

### Vercel ë°°í¬ í›„ ì‹¤í–‰ ë°©ë²•:
1. ìŠ¤í¬ë¦½íŠ¸ë¥¼ Vercel Functionsë¡œ ë³€í™˜
2. ë˜ëŠ” ë¡œì»¬ì—ì„œ Vercel í™˜ê²½ë³€ìˆ˜ ì‚¬ìš©

## ğŸš€ ê¶Œì¥ì‚¬í•­

í˜„ì¬ ìƒí™©ì—ì„œëŠ” ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤:

1. **Vercelì— ë¨¼ì € ë°°í¬**
   - í˜„ì¬ ì½”ë“œë¥¼ Vercelì— ë°°í¬
   - Vercel í™˜ê²½ì—ì„œ Firebase êµ¬ì¡° ìƒì„± ì‹¤í–‰

2. **ë¡œì»¬ Firebase ì„¤ì •**
   - Firebase ì„œë¹„ìŠ¤ ê³„ì • í‚¤ë¥¼ ë¡œì»¬ì— ì¶”ê°€
   - `.env.local`ì— `FIREBASE_SERVICE_ACCOUNT_KEY_BASE64` ì„¤ì •

3. **Mock ë°ì´í„°ë¡œ ê³„ì† ê°œë°œ**
   - Phase 3-4ë¥¼ Mock ë°ì´í„°ë¡œ ì§„í–‰
   - Vercel ë°°í¬ í›„ Firebase ì „í™˜

## ğŸ“ ê²°ë¡ 

Firebase êµ¬ì¡° ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¤€ë¹„ë˜ì—ˆì§€ë§Œ, ë¡œì»¬ í™˜ê²½ì˜ ì¸ì¦ ë¬¸ì œë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Vercel í™˜ê²½ì—ì„œëŠ” ì´ë¯¸ ì„¤ì •ëœ `FIREBASE_SERVICE_ACCOUNT_KEY`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ìƒ ì‘ë™í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.