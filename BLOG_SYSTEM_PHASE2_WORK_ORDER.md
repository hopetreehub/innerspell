# 블로그 시스템 2단계 작업지시서

## 프로젝트 정보
- **프로젝트명**: InnerSpell 타로점 서비스
- **작업일자**: 2025-08-09
- **작업단계**: Phase 2 - 블로그 시스템 완성
- **포트**: 4000 (필수)

## 현재 상태 요약

### ✅ 완료된 작업 (Phase 1)
1. **블로그 관리자 패널 구현**
   - BlogManagement.tsx 컴포넌트 생성 완료
   - 통계 표시 기능 (전체/게시/초안/보관)
   - 포스트 목록 테이블 표시
   - 새 포스트 작성 인라인 폼
   - API 라우트 기반 CRUD 구현

2. **파일 시스템 연동**
   - data/blog-posts.json 파일 저장소 사용
   - 18개 포스트 정상 저장/조회
   - 백업 시스템 구현

3. **API 라우트 구현**
   - POST /api/blog/posts - 새 포스트 생성 ✅
   - GET /api/blog/posts - 포스트 목록 조회 ✅
   - PUT /api/blog/posts/[id] - 포스트 수정 ⚠️
   - DELETE /api/blog/posts/[id] - 포스트 삭제 ✅

### ❌ 미해결 이슈
1. **블로그 프론트엔드 페이지**
   - GET /api/blog/posts?published=true 405 오류
   - 블로그 페이지에서 포스트가 표시되지 않음
   - blog-service.ts의 getAllPosts 함수 수정 필요

2. **포스트 수정 기능**
   - PUT 요청 시 JSON 파싱 오류 발생
   - 상태 변경 시 빈 body 전송 문제

## Phase 2 작업 목록

### 1. 블로그 프론트엔드 수정 (긴급) 🔥
**목표**: 블로그 페이지에서 포스트가 정상적으로 표시되도록 수정

**작업 내용**:
1. `src/services/blog-service.ts` 수정
   - getAllPosts 함수가 파일 시스템 사용하도록 변경
   - API 엔드포인트 경로 확인 및 수정

2. `src/app/blog/page.tsx` 검토
   - 데이터 fetching 로직 확인
   - 에러 처리 개선

**검증 방법**:
- http://localhost:4000/blog 접속
- 게시된 포스트들이 표시되는지 확인
- Playwright 테스트로 자동 검증

### 2. 포스트 수정 기능 완성 🔧
**목표**: 포스트 편집 UI 및 기능 구현

**작업 내용**:
1. BlogManagement 컴포넌트에 편집 모드 추가
   - 편집 버튼 클릭 시 폼에 데이터 로드
   - 수정 사항 저장 기능

2. API 라우트 수정
   - PUT 요청 body 파싱 오류 해결
   - 부분 업데이트 지원 (상태만 변경 등)

**검증 방법**:
- 포스트 편집 버튼 클릭
- 내용 수정 후 저장
- 변경사항 즉시 반영 확인

### 3. 이미지 업로드 통합 📸
**목표**: 포스트 작성 시 이미지 업로드 및 미리보기

**작업 내용**:
1. 이미지 업로드 UI 추가
   - 파일 선택 버튼
   - 업로드 진행률 표시
   - 미리보기 이미지 표시

2. 업로드 API 연동
   - /api/blog/upload 엔드포인트 활용
   - public/uploads/blog 디렉토리 저장

**검증 방법**:
- 새 포스트 작성 시 이미지 업로드
- 업로드된 이미지 미리보기 확인
- 저장 후 블로그 페이지에서 이미지 표시 확인

### 4. 고급 기능 구현 🎯
**목표**: 사용자 경험 향상을 위한 추가 기능

**작업 내용**:
1. 검색 기능
   - 제목, 내용, 태그로 검색
   - 실시간 검색 결과 표시

2. 페이지네이션
   - 포스트 목록 페이지 분할
   - 페이지당 10개 표시

3. 필터링
   - 상태별 필터 (전체/게시/초안/보관)
   - 카테고리별 필터

**검증 방법**:
- 검색어 입력 시 결과 필터링
- 페이지 이동 기능 작동
- 필터 적용 시 목록 업데이트

### 5. SEO 및 성능 최적화 🚀
**목표**: 검색엔진 최적화 및 로딩 속도 개선

**작업 내용**:
1. 메타데이터 관리
   - 각 포스트별 SEO 메타 태그
   - Open Graph 태그 추가

2. 이미지 최적화
   - Next.js Image 컴포넌트 활용
   - 지연 로딩 구현

3. 캐싱 전략
   - 정적 생성 (SSG) 적용
   - 재검증 시간 설정

**검증 방법**:
- Lighthouse 점수 측정
- 페이지 로딩 속도 확인
- SEO 메타데이터 검사

## 작업 우선순위
1. 🔥 **긴급**: 블로그 프론트엔드 수정 (포스트가 표시되지 않는 문제)
2. 🔧 **중요**: 포스트 수정 기능 완성
3. 📸 **일반**: 이미지 업로드 통합
4. 🎯 **선택**: 고급 기능 구현
5. 🚀 **최적화**: SEO 및 성능 개선

## 테스트 체크리스트
- [ ] 블로그 페이지 포스트 표시
- [ ] 새 포스트 작성 및 저장
- [ ] 포스트 수정 및 업데이트
- [ ] 포스트 삭제
- [ ] 상태 변경 (초안↔게시↔보관)
- [ ] 이미지 업로드 및 표시
- [ ] 검색 기능
- [ ] 페이지네이션
- [ ] 필터링
- [ ] 모바일 반응형 디자인

## 주의사항
- 포트는 반드시 4000번 사용
- 파일 시스템 모드 유지 (NEXT_PUBLIC_ENABLE_FILE_STORAGE=true)
- 모든 변경사항은 Playwright로 검증
- Git 커밋은 사용자 동의 후에만 진행

## 예상 소요시간
- Phase 2 전체: 4-6시간
- 긴급 작업 (블로그 프론트엔드): 1시간
- 포스트 수정 기능: 1-2시간
- 이미지 업로드: 1시간
- 고급 기능: 2시간
- 최적화: 1시간

---

**다음 단계**: 블로그 프론트엔드 수정부터 시작하여 순차적으로 진행