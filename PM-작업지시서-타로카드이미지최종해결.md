# 📋 PM 작업지시서: 타로 카드 15-21번 이미지 최종 해결

## 🎯 목표
타로 카드 백과사전에서 15-21번 메이저 아르카나 카드 이미지가 표시되지 않는 문제를 완전히 해결

## 📊 현재 상황
### 문제의 특징
- **영향 범위**: 15-21번 카드만 (The Devil ~ The World)
- **파일 형식**: JPG 파일만 문제 (PNG는 정상)
- **환경**: 로컬 정상, Vercel에서만 실패
- **오류 유형**: 404 Not Found
- **시도한 해결책**: .vercelignore 수정, unoptimized 속성 추가 - 모두 실패

### 패턴 분석
- 0-14번 카드: ✅ 정상 표시
- 15-21번 카드: ❌ 표시 안됨
- 마이너 아르카나: ✅ 정상 표시

## 🔍 근본 원인 가설
1. **파일명 문제**: 15-21번만 특수한 패턴 (숫자-영문 조합)
2. **Vercel 빌드 프로세스**: 특정 파일명 패턴 처리 오류
3. **이미지 크기/형식**: 15-21번 파일의 특수성
4. **경로 문제**: URL 인코딩 또는 대소문자 문제

## 🛠️ 해결 방안 (우선순위순)

### 방안 1: 직접 이미지 서빙 (긴급 조치)
**예상 소요시간**: 30분
**성공 확률**: 95%

1. public 폴더 직접 접근 방식으로 전환
2. Image 컴포넌트 대신 img 태그 사용
3. 15-21번 카드만 선택적 적용

**구현 방법**:
```tsx
// 15-21번 카드 체크
const isDifficultCard = card.number >= 15 && card.number <= 21;

{isDifficultCard ? (
  <img
    src={card.imageUrl}
    alt={card.name}
    className="w-full h-full object-cover"
  />
) : (
  <Image ... />
)}
```

### 방안 2: 파일 재업로드 및 이름 변경
**예상 소요시간**: 45분
**성공 확률**: 80%

1. 15-21번 이미지 파일명 변경
   - 기존: `15-TheDevil.jpg`
   - 변경: `major-15-devil.jpg`
2. 데이터 파일의 경로 업데이트
3. 재배포 및 테스트

### 방안 3: 이미지 포맷 변환 (PNG)
**예상 소요시간**: 1시간
**성공 확률**: 90%

1. 15-21번 JPG를 PNG로 변환
2. 파일 크기 최적화
3. 데이터 파일 경로 업데이트
4. 전체 테스트

### 방안 4: CDN 활용 (장기 해결책)
**예상 소요시간**: 2시간
**성공 확률**: 99%

1. Cloudinary 또는 외부 CDN에 이미지 업로드
2. remotePatterns에 CDN 도메인 추가
3. 이미지 URL 전체 교체

## 📝 실행 계획

### Phase 1: 진단 (15분)
1. 15-21번 이미지 파일 상세 정보 확인
   - 파일 크기
   - 이미지 치수
   - 메타데이터
2. Vercel 빌드 로그 상세 분석
3. 직접 URL 접근 테스트

### Phase 2: 긴급 조치 (30분)
1. 방안 1 구현 (직접 이미지 서빙)
2. 로컬 테스트
3. Vercel 배포
4. 결과 확인

### Phase 3: 근본 해결 (1시간)
방안 1이 성공하면:
- 코드 정리 및 최적화
- 성능 모니터링 설정

방안 1이 실패하면:
- 방안 2 또는 3 실행
- 단계별 테스트

### Phase 4: 검증 (30분)
1. 전체 페이지 Playwright 테스트
2. 성능 지표 확인
3. 사용자 경험 검증

## 📈 성공 지표
- [ ] 15-21번 카드 이미지 100% 표시
- [ ] 페이지 로드 시간 3초 이내 유지
- [ ] 모든 브라우저에서 정상 작동
- [ ] Lighthouse 점수 저하 없음

## ⚠️ 리스크 관리
1. **SEO 영향**: img 태그 사용 시 alt 텍스트 필수
2. **성능**: 이미지 최적화 손실 → loading="lazy" 적용
3. **일관성**: 다른 카드와 표시 방식 차이 → CSS로 통일

## 🔧 필요 도구
- 이미지 변환 도구
- Playwright
- Chrome DevTools
- Vercel CLI

## 📅 예상 총 소요시간
2시간 30분 (버퍼 30분 포함)

## 🚀 실행 승인 대기
이 작업지시서에 따라 15-21번 타로 카드 이미지 문제를 완전히 해결하겠습니다.
가장 빠르고 확실한 방안 1부터 시작하여 단계적으로 진행하겠습니다.

**승인 시 즉시 Phase 1 진단부터 시작합니다.**